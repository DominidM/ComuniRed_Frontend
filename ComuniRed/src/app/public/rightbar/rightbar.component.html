<!-- Rightbar content (tendencias / areas / stats) -->
<div class="rightbar-container">
  <!-- Tendencias -->
  <section class="rightbar-section">
    <div class="rightbar-section-title">
      <mat-icon>trending_up</mat-icon>
      Tendencias
    </div>
    <div class="trend-list">
      <div class="trend-item" *ngFor="let t of trends">
        <div>
          <span class="trend-hashtag">#{{ t.tag }}</span>
        </div>
        <div class="trend-desc">{{ t.desc }}</div>
        <div class="trend-count">{{ t.count }}</div>
      </div>
    </div>
  </section>

  <!-- Áreas cercanas -->
  <section class="rightbar-section">
    <div class="rightbar-section-title">
      <mat-icon>location_on</mat-icon>
      Áreas Cercanas
    </div>
    <div class="district-list">
      <div class="district-item" *ngFor="let a of areas">
        <span class="district-name">{{ a.name }}</span>
        <span class="district-distance">{{ a.distance }}</span>
        <span class="district-count">{{ a.reports }}</span>
      </div>
    </div>
  </section>

  <!-- Estadísticas -->
  <section class="rightbar-section rightbar-stats">
    <div class="stats-row">
      <div>
        <div class="stats-value">{{ stats.today }}</div>
        <div class="stats-label">Reportes hoy</div>
      </div>
      <div>
        <div class="stats-value stats-green">{{ stats.solvedPercent }}%</div>
        <div class="stats-label">Resueltos</div>
      </div>
    </div>
  </section>

  <div class="rightbar-spacer"></div>
</div>

<!-- Botón flotante de accesibilidad (siempre encima) -->
<button
  class="rightbar-accessibility-btn"
  aria-label="Accesibilidad"
  (click)="toggleAccessibility()"
  aria-haspopup="dialog"
  [attr.aria-expanded]="accessibilityOpen"
  type="button"
>
  <mat-icon>accessibility</mat-icon>
</button>

<!-- Panel de accesibilidad: permanece en DOM, fuera del flujo visual (fixed) -->
<!-- NOTE: important that this element is NOT inside .rightbar-container so it's fixed over the page -->
<div
  class="accessibility-panel"
  [class.open]="accessibilityOpen"
  role="dialog"
  aria-label="Opciones de accesibilidad"
  [attr.aria-hidden]="!accessibilityOpen"
>
  <h3>Accesibilidad</h3>

  <div class="acc-controls">
    <div class="acc-row">
      <label>Ajustar tamaño de letra</label>
      <div class="acc-actions">
        <button (click)="decreaseText()" aria-label="Disminuir tamaño" type="button">A-</button>
        <button (click)="resetText()" aria-label="Restablecer tamaño" type="button">A</button>
        <button (click)="increaseText()" aria-label="Aumentar tamaño" type="button">A+</button>
      </div>
    </div>

    <div class="acc-row">
      <label>Alto contraste</label>
      <div class="acc-actions">
        <button (click)="toggleHighContrast()" [attr.aria-pressed]="isHighContrast" type="button">
          {{ isHighContrast ? 'Desactivar' : 'Activar' }}
        </button>
      </div>
    </div>

    <div class="acc-row">
      <label>Reducir animaciones</label>
      <div class="acc-actions">
        <button (click)="toggleReducedMotion()" [attr.aria-pressed]="isReducedMotion" type="button">
          {{ isReducedMotion ? 'Desactivar' : 'Activar' }}
        </button>
      </div>
    </div>

    <div class="acc-row">
      <button class="acc-close" (click)="toggleAccessibility()" type="button">Cerrar</button>
    </div>
  </div>
</div>