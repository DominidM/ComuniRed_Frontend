<div class="feed-container">
  <!-- Barra de bÃºsqueda mejorada -->
  <div class="search-container">
    <div class="search-icon">ğŸ”</div>
    <input 
      type="text" 
      [(ngModel)]="searchQuery"
      placeholder="Buscar reportes, ubicaciones o usuarios..." 
      class="search-input"
    />
  </div>

  <!-- Filtros de categorÃ­as -->
  <div class="categories-filter">
    <button 
      *ngFor="let category of categories" 
      class="category-chip"
      [class.active]="selectedCategory === category.name"
      (click)="selectedCategory = category.name"
    >
      <span>{{ category.icon }}</span>
      {{ category.name }}
    </button>
  </div>

  <!-- Posts -->
  <div *ngFor="let post of filteredPosts(); trackBy: trackByPostId" class="post-card">
    <!-- Header del post -->
    <div class="post-header">
      <div class="avatar-container">
        <img [src]="post.avatar" [alt]="post.author" class="avatar" />
      </div>
      <div class="post-info">
        <h3 class="author">{{ post.author }}</h3>
        <div class="post-meta">
          <span>{{ post.date }}</span>
          <span *ngIf="post.location" class="location">
            <span class="location-icon">ğŸ“</span>
            {{ post.location }}
          </span>
          <span class="category-badge">{{ post.category }}</span>
        </div>
      </div>
    </div>

    <!-- Contenido del post -->
    <h4 class="post-title">{{ post.title }}</h4>
    <p class="post-content">{{ post.content }}</p>

    <!-- Imagen del post -->
    <div *ngIf="post.imageUrl" class="post-image-container">
      <img [src]="post.imageUrl" [alt]="post.title" class="post-image" />
      <div class="image-overlay"></div>
    </div>

    <!-- SecciÃ³n de votaciÃ³n -->
    <div *ngIf="post.imageUrl" class="vote-section">
      <div class="vote-question">
        Â¿EstÃ¡s de acuerdo con este reporte?
        <span class="vote-count">{{ post.acceptVotes + post.rejectVotes }} votos</span>
      </div>
      <div class="vote-buttons">
        <button 
          class="vote-btn accept"
          [class.voted]="post.userVote === 'accept'"
          [disabled]="post.userVote !== null"
          (click)="vote(post, 'accept')"
        >
          <span>âœ…</span>
          SÃ­ ({{ post.acceptVotes }})
        </button>
        <button 
          class="vote-btn reject"
          [class.voted]="post.userVote === 'reject'"
          [disabled]="post.userVote !== null"
          (click)="vote(post, 'reject')"
        >
          <span>âŒ</span>
          No ({{ post.rejectVotes }})
        </button>
      </div>
    </div>

    <!-- Acciones del post -->
    <div class="post-actions">
      <button 
        class="action-btn"
        [class.liked]="post.liked"
        (click)="toggleLike(post)"
      >
        <span>{{ post.liked ? 'â¤ï¸' : 'ğŸ¤' }}</span>
        {{ post.likes }}
      </button>
      
      <button 
        class="action-btn"
        (click)="toggleComments(post)"
      >
        <span>ğŸ’¬</span>
        {{ post.comments.length }}
      </button>
      
      <button 
        class="action-btn"
        [class.bookmarked]="post.bookmarked"
        (click)="toggleBookmark(post)"
      >
        <span>{{ post.bookmarked ? 'ğŸ”–' : 'ğŸ“‘' }}</span>
        Guardar
      </button>
      
      <button 
        class="action-btn"
        (click)="sharePost(post)"
      >
        <span>ğŸ“¤</span>
        Compartir
      </button>
    </div>

    <!-- SecciÃ³n de comentarios -->
    <div *ngIf="post.showComments" class="comments-section">
      <div *ngFor="let comment of post.comments; trackBy: trackByComment" class="comment">
        <strong>{{ comment.author }}:</strong> {{ comment.content }}
      </div>
      
      <div class="comment-input-container">
        <input 
          type="text" 
          #commentInput
          placeholder="Escribe un comentario..." 
          class="comment-input"
          (keyup.enter)="addComment(post, commentInput.value); commentInput.value = ''"
        />
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay posts -->
  <div *ngIf="filteredPosts().length === 0" class="no-posts">
    <div style="text-align: center; padding: 40px; color: #657786;">
      <div style="font-size: 48px; margin-bottom: 16px;">ğŸ”</div>
      <h3>No se encontraron reportes</h3>
      <p>Intenta cambiar los filtros o tÃ©rminos de bÃºsqueda</p>
    </div>
  </div>
</div>