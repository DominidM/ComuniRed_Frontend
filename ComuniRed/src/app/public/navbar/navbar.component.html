<nav class="cr-navbar" role="navigation" aria-label="ComuniRed top navigation">
  <div class="cr-navbar__left">
    <button class="cr-logo" (click)="goHome()" aria-label="Inicio">
      <!-- logo from URL -->
      <img class="cr-logo__icon" [src]="logoUrl" alt="ComuniRed logo" loading="lazy" width="28" height="28" />
      <span class="cr-logo__text">ComuniRed</span>
    </button>
  </div>

  <div class="cr-navbar__center">
    <label class="cr-search" aria-label="Buscar">
      <svg class="cr-search__icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M21 21l-4.35-4.35" stroke="#6b6f76" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        <circle cx="11" cy="11" r="6" stroke="#6b6f76" stroke-width="1.6" fill="none"/>
      </svg>
      <input
        type="search"
        placeholder="Buscar reportes, personas..."
        [(ngModel)]="query"
        (ngModelChange)="onQueryChange($event)"
        aria-label="Buscar reportes, personas"
      />
    </label>
  </div>

  <div class="cr-navbar__right" role="toolbar" aria-label="Controles">
    <button class="cr-btn cr-btn--icon" title="Notificaciones" (click)="openNotifications()">
      <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" fill="none">
        <path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11c0-3.07-1.64-5.64-4.5-6.32V4a1.5 1.5 0 0 0-3 0v0.68C7.64 5.36 6 7.93 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5" stroke="#333" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="cr-badge" *ngIf="notificationCount > 0" aria-live="polite">{{ notificationCount }}</span>
    </button>

    <button class="cr-btn cr-btn--icon" (click)="toggleTheme()" title="Cambiar tema">
      <ng-container *ngIf="!isDark; else darkIcon">
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" fill="none">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="#333" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </ng-container>
      <ng-template #darkIcon>
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" fill="none">
          <circle cx="12" cy="12" r="4" stroke="#333" stroke-width="1.4"/>
          <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="#333" stroke-width="1.2" stroke-linecap="round"/>
        </svg>
      </ng-template>
    </button>
  </div>
</nav>