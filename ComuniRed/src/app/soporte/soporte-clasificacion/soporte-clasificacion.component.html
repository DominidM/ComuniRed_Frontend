<div class="clasificacion-container">
  <div class="header-section">
    <h2>ClasificaciÃ³n de Reportes</h2>
    <p class="descripcion">Organiza los reportes por categorÃ­as para una mejor gestiÃ³n</p>
  </div>

  <div class="stats-resumen">
    <div class="stat-item">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <span class="stat-label">Total de Reportes</span>
        <span class="stat-value">{{ totalReportes }}</span>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <span class="stat-label">Categorizados</span>
        <span class="stat-value">{{ totalReportes - reportesSinCategorizar }}</span>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">âš ï¸</div>
      <div class="stat-content">
        <span class="stat-label">Sin Categorizar</span>
        <span class="stat-value">{{ reportesSinCategorizar }}</span>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">ğŸ“ˆ</div>
      <div class="stat-content">
        <span class="stat-label">Progreso</span>
        <span class="stat-value">{{ porcentajeCategorizado }}%</span>
      </div>
    </div>
  </div>

  <div class="barra-progreso">
    <div class="progreso-fill" [style.width.%]="porcentajeCategorizado"></div>
  </div>

  <div class="categorias-grid">
    <div 
      *ngFor="let categoria of categorias" 
      class="categoria-card"
      [class.selected]="categoriaSeleccionada === categoria.id"
      (click)="seleccionarCategoria(categoria.id)"
    >
      <div class="categoria-header" [style.background]="categoria.color">
        <span class="categoria-icono">{{ categoria.icono }}</span>
        <span class="categoria-badge">{{ categoria.total }}</span>
      </div>
      <div class="categoria-body">
        <h3>{{ categoria.nombre }}</h3>
        <p>{{ categoria.descripcion }}</p>
      </div>
    </div>
  </div>

  <div class="reportes-section">
    <div class="reportes-header">
      <h3>
        <span *ngIf="!categoriaSeleccionada">Todos los Reportes</span>
        <span *ngIf="categoriaSeleccionada">
          {{ getNombreCategoriaSeleccionada() }}
        </span>
        ({{ reportesFiltrados.length }})
      </h3>
      
      <div class="busqueda-container">
        <input 
          type="text" 
          placeholder="Buscar reportes..." 
          [(ngModel)]="busqueda"
          (input)="aplicarBusqueda()"
          class="input-busqueda"
        />
      </div>
    </div>

    <div class="reportes-lista" *ngIf="reportesFiltrados.length > 0">
      <div *ngFor="let reporte of reportesFiltrados" class="reporte-item">
        <div class="reporte-info">
          <div class="reporte-encabezado">
            <h4>{{ reporte.titulo }}</h4>
            <span 
              class="categoria-tag"
              [style.background]="getCategoriaColor(reporte.tipo)"
            >
              {{ getCategoriaNombre(reporte.tipo) }}
            </span>
          </div>
          <p class="reporte-descripcion">{{ reporte.descripcion }}</p>
          <div class="reporte-meta">
            <span>ğŸ“ {{ reporte.ubicacion }}</span>
            <span>ğŸ“… {{ reporte.fecha | date:'dd/MM/yyyy' }}</span>
            <span>ğŸ‘¤ {{ reporte.cliente.nombre }}</span>
          </div>
        </div>
        
        <div class="reporte-acciones">
          <select 
            class="select-categoria"
            [value]="reporte.tipo"
            (change)="asignarCategoria(reporte, $any($event.target).value)"
          >
            <option value="">Sin categorÃ­a</option>
            <option *ngFor="let cat of categorias" [value]="cat.id">
              {{ cat.icono }} {{ cat.nombre }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <div *ngIf="reportesFiltrados.length === 0" class="sin-resultados">
      <div class="sin-resultados-icono">ğŸ”</div>
      <h3>No se encontraron reportes</h3>
      <p>Intenta con otra bÃºsqueda o selecciona una categorÃ­a diferente</p>
    </div>
  </div>
</div>
