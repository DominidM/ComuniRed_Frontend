<div class="crud-estado-queja-root">
  <!-- Header -->
  <div class="crud-estado-queja-header">
    <h2>Gesti贸n de Estados de Queja</h2>
    <button class="btn-primary" (click)="abrirModal()">Nuevo Estado</button>
  </div>

<input type="text" [(ngModel)]="nombreBuscado" placeholder="Buscar por nombre" (keyup.enter)="buscar()">
<button (click)="buscar()">Buscar</button>
<button (click)="obtenerEstados()">Mostrar todos</button>


  <!-- Tabla de estados -->
  <table class="crud-estado-queja-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Clave</th>
        <th>Nombre</th>
        <th>Descripci贸n</th>
        <th>Orden</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let estado of estados">
        <td>{{ estado.id }}</td>
        <td>{{ estado.clave }}</td>
        <td>{{ estado.nombre }}</td>
        <td>{{ estado.descripcion }}</td>
        <td>{{ estado.orden }}</td>
        <td>
          <button class="btn-edit" (click)="editarEstado(estado)">Editar</button>
          <button class="btn-delete" (click)="eliminarEstado(estado.id)">Eliminar</button>
        </td>
      </tr>
      <tr *ngIf="estados.length === 0">
        <td colspan="6">No hay estados disponibles.</td>
      </tr>
    </tbody>
  </table>

  <!-- Modal -->
  <div class="crud-estado-queja-modal" [style.display]="modalVisible ? 'flex' : 'none'">
    <div class="crud-estado-queja-modal-content">
      <h3>{{ modoEdicion ? 'Editar Estado de Queja' : 'Nuevo Estado de Queja' }}</h3>

      <form (ngSubmit)="guardarEstado()">
        <div class="form-group">
          <label for="clave">Clave</label>
          <input id="clave" [(ngModel)]="estadoActual.clave" name="clave" type="text" placeholder="Ej: pendiente" required />
        </div>

        <div class="form-group">
          <label for="nombre">Nombre</label>
          <input id="nombre" [(ngModel)]="estadoActual.nombre" name="nombre" type="text" placeholder="Ej: Pendiente" required />
        </div>

        <div class="form-group">
          <label for="descripcion">Descripci贸n</label>
          <textarea id="descripcion" [(ngModel)]="estadoActual.descripcion" name="descripcion" placeholder="Ej: Queja recibida, esperando revisi贸n"></textarea>
        </div>

        <div class="form-group">
          <label for="orden">Orden</label>
          <input id="orden" [(ngModel)]="estadoActual.orden" name="orden" type="number" min="1" placeholder="Ej: 1" required />
        </div>

        <div class="crud-estado-queja-modal-actions">
          <button type="submit" class="btn-primary">{{ modoEdicion ? 'Actualizar' : 'Guardar' }}</button>
          <button type="button" class="btn-cancel" (click)="cerrarModal()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>
